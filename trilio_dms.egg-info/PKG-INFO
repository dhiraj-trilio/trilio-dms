Metadata-Version: 2.1
Name: trilio-dms
Version: 1.0.0
Summary: Trilio Dynamic Mount Service
Home-page: https://github.com/triliodata/trilio-dms
Author: Trilio Data
Author-email: support@trilio.io
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: System Administrators
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Requires-Python: >=3.8
Description-Content-Type: text/markdown

READMEMD = """
# Trilio Dynamic Mount Service

Centralized mount/unmount service for backup targets (S3, NFS) with job-driven bindings and secret management.

## Features

- ğŸ” Secure credential management with Barbican
- ğŸ“¦ Job-driven mount bindings
- ğŸ”„ Automatic reconciliation
- ğŸš€ Horizontal scalability
- ğŸ’¾ Persistent mounts across restarts
- ğŸ”§ RESTful and CLI interfaces

## Installation

```bash
pip install trilio-dms
```

## Quick Start

### Server

```bash
trilio-dms \\
  --db-url mysql://user:pass@localhost/trilio_dms \\
  --rabbitmq-url amqp://user:pass@localhost:5672 \\
  --auth-url http://keystone:5000/v3 \\
  --node-id compute-01
```

### Client Usage

```python
from trilio_dms import DMSClient, MountContext

# Create client
client = DMSClient(rabbitmq_url='amqp://localhost:5672')

# Use context manager for automatic cleanup
with MountContext(client, job_id, target_id, token, node_id) as mount:
    # Mount is ready at mount.mount_path
    perform_backup(mount.mount_path)
    # Automatic unmount on exit
```

### CLI

```bash
# Register new target
trilio-dms-cli register

# List targets
trilio-dms-cli list

# Test mount
trilio-dms-cli test-mount <target-id>
```

## Configuration

Set environment variables:

```bash
export DMS_DB_URL="mysql://user:pass@localhost/trilio_dms"
export DMS_RABBITMQ_URL="amqp://user:pass@localhost:5672"
export DMS_AUTH_URL="http://keystone:5000/v3"
export DMS_NODE_ID="$(hostname)"
```

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     RabbitMQ     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚     DMS      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚            â”‚            â”‚
                      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
                      â”‚ MySQL  â”‚   â”‚Barbicanâ”‚  â”‚Drivers â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

"""

